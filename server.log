
> evershop-ecommerce@0.1.0 dev
> next dev --turbopack

   ‚ñ≤ Next.js 15.5.4 (Turbopack)
   - Local:        http://localhost:3000
   - Network:      http://192.168.0.142:3000
   - Environments: .env.local

 ‚úì Starting...
 ‚óã Compiling middleware ...
 ‚úì Compiled middleware in 532ms
 ‚úì Ready in 3.6s
 ‚óã Compiling /api/auth/login ...
 ‚úì Compiled /api/auth/login in 5.4s
(node:115691) [MONGOOSE] Warning: Duplicate schema index on {"email":1} found. This is often due to declaring an index using both "index: true" and "schema.index()". Please remove the duplicate index definition.
(Use `node --trace-warnings ...` to show where the warning was created)
üîç Login attempt: { email: 'admin@evershop.com', passwordLength: 9 }
üîç User found: admin@evershop.com (admin)
üîç Verifying password...
üîç Password valid: true
‚úÖ Login successful for: admin@evershop.com
üîç Setting cookie with token for user: admin@evershop.com
 POST /api/auth/login 200 in 8441ms
 ‚óã Compiling /api/auth/verify ...
 ‚úì Compiled /api/auth/verify in 518ms
üîç Auth verify - Token received: true
üîç Auth verify - JWT Secret exists: true
‚ùå Token verification error: Error [JsonWebTokenError]: invalid signature
    at POST (src/app/api/auth/verify/route.ts:22:25)
  20 |
  21 |     // Verify the token
> 22 |     const decoded = jwt.verify(token, process.env.JWT_SECRET) as any;
     |                         ^
  23 |     console.log('üîç Auth verify - Token decoded:', { userId: decoded.userId, role: decoded.role });
  24 |     
  25 |     // Check if user is admin {
  constructor: [Function: JsonWebTokenError]
}
 POST /api/auth/verify 200 in 1730ms
 ‚úì Compiled middleware in 3ms
 ‚úì Compiled /api/debug/env in 337ms
 GET /api/debug/env 200 in 816ms
[?25h
